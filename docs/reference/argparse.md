# Argparse Reference\n\nType-safe argument parsing with descriptors and subcommands.\n\n---\n\n## Overview\n\nThe [`herogold.argparse`](pdoc:herogold.argparse) module provides an OOP approach to building CLIs:\n\n- **Descriptors** for declarative argument definitions\n- **Subcommands** as classes with their own arguments\n- **Type safety** with full IDE support\n- **Clean separation** between definition and execution\n\n---\n\n## Key Classes\n\n### Argument\n\n[`Argument`](pdoc:herogold.argparse.Argument) - Descriptor for CLI arguments.\n\n**Usage:**\n```python\nfrom herogold.argparse import Argument\n\nport = Argument(\"port\", type_=int, default=8000, help=\"Server port\")\n```\n\n**Parameters:**\n- `*names`: Argument names (e.g., \"port\", \"verbose\")\n- `type_`: Type converter function (default: `str`)\n- `action`: Argument action (see [`Actions`](pdoc:herogold.argparse.Actions))\n- `default`: Default value\n- `default_factory`: Factory function for default\n- `help`: Help text\n\n### SubCommand\n\n[`SubCommand`](pdoc:herogold.argparse.SubCommand) - Base class for defining subcommands.\n\n**Usage:**\n```python\nfrom herogold.argparse import SubCommand, Argument\n\nclass DeployCommand(SubCommand):\n    name = \"deploy\"\n    help = \"Deploy the application\"\n    \n    environment = Argument(\"environment\", help=\"Target environment\")\n    \n    def execute(self, args):\n        print(f\"Deploying to {args.environment}\")\n        return 0\n```\n\n**Class Attributes:**\n- `name`: Command name (defaults to lowercase class name)\n- `help`: Help text for the command\n- `_parser`: ArgumentParser (set automatically)\n\n**Methods:**\n- [`execute(args)`](pdoc:herogold.argparse.SubCommand.execute) - Implement command logic\n\n### SubCommandGroup\n\n[`SubCommandGroup`](pdoc:herogold.argparse.SubCommandGroup) - Manages multiple subcommands.\n\n**Usage:**\n```python\nfrom argparse import ArgumentParser\nfrom herogold.argparse import SubCommandGroup\n\nparser = ArgumentParser()\ncommands = SubCommandGroup(parser)\ncommands.add_commands(DeployCommand, StatusCommand)\n\nargs = parser.parse_args()\nreturn commands.execute(args)\n```\n\n**Methods:**\n- [`add_command(cmd_class)`](pdoc:herogold.argparse.SubCommandGroup.add_command) - Add single command\n- [`add_commands(*cmd_classes)`](pdoc:herogold.argparse.SubCommandGroup.add_commands) - Add multiple commands\n- [`execute(args)`](pdoc:herogold.argparse.SubCommandGroup.execute) - Execute selected command\n\n### Actions\n\n[`Actions`](pdoc:herogold.argparse.Actions) - Enum of argument actions.\n\n**Values:**\n- `STORE` - Store argument value (default)\n- `STORE_TRUE` - Store True when flag present\n- `STORE_FALSE` - Store False when flag present\n- `STORE_BOOL` - Support `--flag` and `--no-flag`\n- `APPEND` - Append to list\n- `COUNT` - Count occurrences\n\n---\n\n## Common Patterns\n\n### Basic Arguments\n\n```python\nfrom herogold.argparse import Argument\n\nclass Config:\n    port = Argument(\"port\", type_=int, default=8000)\n    host = Argument(\"host\", default=\"localhost\")\n    verbose = Argument(\"verbose\", action=Actions.STORE_BOOL, default=False)\n```\n\n### Positional Arguments\n\n```python\nfilename = Argument(\"filename\", help=\"Input file\")\n```\n\n### Multiple Names\n\n```python\nverbose = Argument(\"verbose\", \"v\", action=Actions.STORE_BOOL)\n# Creates: --verbose, -v, --no-verbose, --no-v\n```\n\n### Required Arguments\n\nPositional arguments without defaults are required:\n\n```python\ncommand = Argument(\"command\", help=\"Command to execute\")\n```\n\n### List Arguments\n\n```python\ntags = Argument(\"tags\", action=Actions.APPEND, help=\"Add tag\")\n# Usage: --tags foo --tags bar\n```\n\n### Complex Subcommands\n\n```python\nclass DatabaseCommand(SubCommand):\n    \"\"\"Database management base.\"\"\"\n    host = Argument(\"host\", default=\"localhost\")\n    port = Argument(\"port\", type_=int, default=5432)\n\nclass MigrateCommand(DatabaseCommand):\n    \"\"\"Run migrations.\"\"\"\n    name = \"db:migrate\"\n    target = Argument(\"target\", default=None)\n    \n    def execute(self, args):\n        print(f\"Migrating {args.host}:{args.port} to {args.target}\")\n        return 0\n```\n\n---\n\n## See Also\n\n- [Examples: Arguments](../examples/arguments.md)\n- [Examples: Subcommands](../examples/subcommands.md)\n- [Full API](pdoc:herogold.argparse)\n